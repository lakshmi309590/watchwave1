<%- include("../partial/userHeader") %>

<main class="main">
    <div class="page-header breadcrumb-wrap">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html" rel="nofollow">Home</a>
                <span></span> Pages
                <span></span> Login / Register
            </div>
        </div>
    </div>
    <section class="pt-150 pb-150">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-1"></div>
                <div class="col-lg-6">
                    <div class="login_wrap widget-taber-content p-30 background-white border-radius-5">
                        <div class="padding_eight_all bg-white">
                            <div class="heading_s1">
                                <h3 class="mb-30">Create an Account</h3>
                            </div>
                            <p class="mb-50 font-sm">
                                Your personal data will be used to support your experience throughout this website, to manage access to your account, and for other purposes described in our privacy policy
                            </p>
                            <form method="post" action="signup" onsubmit="return validateForm()">
                                <div class="form-group">
                                    <input type="text" required="" name="Name" placeholder="Username">
                                </div>
                                <div class="form-group">
                                    <input type="text" required="" name="email" placeholder="Email">
                                </div>
                                <div class="form-group">
                                    <input required="" type="tel" name="phone" required placeholder="Phone">
                                </div>
                                <div class="form-group position-relative">
                                    <input required="" type="password" name="password" id="password" placeholder="Password" class="form-control">
                                    <span toggle="#password" class="fa fa-fw fa-eye field-icon toggle-password"></span>
                                </div>
                                <div class="form-group position-relative">
                                    <input required="" type="password" name="cPassword" id="cPassword" placeholder="Confirm password" class="form-control">
                                    <span toggle="#cPassword" class="fa fa-fw fa-eye field-icon toggle-password"></span>
                                </div>
                                <div class="login_footer form-group">
                                    <div class="chek-form">
                                        <div class="custome-checkbox">
                                            <input class="form-check-input" type="checkbox" name="checkbox" id="exampleCheckbox12" value="">
                                            <label class="form-check-label" for="exampleCheckbox12"><span>I agree to terms &amp; Policy.</span></label>
                                        </div>
                                    </div>
                                    <a href="page-privacy-policy.html"><i class="fi-rs-book-alt mr-5 text-muted"></i>Lean more</a>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn-fill-out btn-block hover-up" name="login">Submit &amp; Register</button>
                                </div>
                            </form>
                            <div class="divider-text-center mt-15 mb-15">
                                <span> or</span>
                            </div>
                            <ul class="btn-login list_none text-center mb-15">
                                <li><a href="#" class="btn btn-facebook hover-up mb-lg-0 mb-sm-4">Login With Facebook</a></li>
                                <li><a href="#" class="btn btn-google hover-up">Login With Google</a></li>
                            </ul>
                            <div class="text-muted text-center">Already have an account? <a href="#">Sign in now</a></div>
                        </div>
                    </div>
                    <% if (locals.message && message.length> 0) { %>
                        <div id="alertMessage" class="alert alert-danger">
                            <%= message %>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </section>
</main>

<%- include("../partial/footer") %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
<style>
.field-icon {
    float: right;
    margin-right: 10px;
    margin-top: -30px;
    position: relative;
    z-index: 2;
    cursor: pointer;
}

.position-relative {
    position: relative;
}
</style>
<script>
$(document).ready(function() {
    $(".toggle-password").click(function() {
        $(this).toggleClass("fa-eye fa-eye-slash");
        var input = $($(this).attr("toggle"));
        if (input.attr("type") == "password") {
            input.attr("type", "text");
        } else {
            input.attr("type", "password");
        }
    });
});

function validateForm() {
    var nameInput = document.getElementsByName("Name")[0];
    var emailInput = document.getElementsByName("email")[0];
    var passwordInput = document.getElementsByName("password")[0];
    var cPasswordInput = document.getElementsByName("cPassword")[0];
    var checkboxInput = document.getElementsByName("checkbox")[0];

    // Trim the values before validation
    var name = nameInput.value.trim();
    var email = emailInput.value.trim();
    var password = passwordInput.value.trim();
    var cPassword = cPasswordInput.value.trim();
    var checkboxChecked = checkboxInput.checked;

    // Validation logic
    if (name === "") {
        alert("Please enter your username.");
        nameInput.focus();
        return false;
    }
    if (email === "") {
        alert("Please enter your email.");
        emailInput.focus();
        return false;
    }
    if (!isValidEmail(email)) {
        alert("Please enter a valid email address.");
        emailInput.focus();
        return false;
    }
    if (password === "") {
        alert("Please enter a password.");
        passwordInput.focus();
        return false;
    }
    if (password.length < 8) {
        alert("Password must be at least 8 characters long.");
        passwordInput.focus();
        return false;
    }
    if (cPassword === "") {
        alert("Please confirm your password.");
        cPasswordInput.focus();
        return false;
    }
    if (password !== cPassword) {
        alert("Passwords do not match.");
        cPasswordInput.focus();
        return false;
    }
    if (!checkboxChecked) {
        alert("Please agree to the terms and policy.");
        return false;
    }

    // If all validations pass, return true to submit the form
    return true;
}

function isValidEmail(email) {
    // Simple email validation using regex
    var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}
</script>
