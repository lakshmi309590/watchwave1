<%- include("../partial/userHeader") %>

<head>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

</head>


<style>
    .swiper-container {
        width: 100%;
        height: 100%;
    }
    .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #fff;

        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
    }
    .swiper-button-next,
    .swiper-button-prev {
        color: #fff;
    }
</style>


<style>
    .home-slider {
        overflow: hidden; /* Hide any content that overflows the container */
    }

    .swiper-container {
        max-width: 100%; /* Limit the maximum width to 100% of the parent container */
        overflow: hidden; /* Hide any content that overflows the container */
    }

    .swiper-wrapper {
        display: flex; /* Ensure the wrapper items are displayed in a row */
    }

    .swiper-slide {
        width: 100%; /* Make each slide take up the full width of the container */
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
    }
</style>


    <main class="main">
      
        <section class="home-slider position-relative pt-70 pb-50">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <% for (let i = 0; i < banner.length; i++) { %>
                        <div class="swiper-slide">
                            <div class="single-hero-slider single-animation-wrap">
                                <div class="container">
                                    <div class="row align-items-center slider-animated-1">
                                        <div class="col-lg-12">
                                            <div class="single-slider-img single-slider-img-1">
                                                <!-- Place your banner image here -->
                                                <img class="animated slider-1-1" src="/uploads/product-images/<%= banner[i].image %>" alt="" style="width: 100%; height: auto;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </section>
        
    
        <section class="popular-categories section-padding mt-15 mb-25">
            <div class="container wow fadeIn animated">
                <h3 class="section-title mb-20"><span>Popular</span> Categories</h3>
                <section class="categories-section section-padding">
                    <style>
                        .category-card {
                            display: inline-block;
                            margin-right: 10px; /* Adjust margin as needed */
                            border: none; /* Remove border */
                        }
                        .category-card .card {
                            border: none; /* Remove border from the card */
                        }
                    </style>
                  
                    <div class="container-fluid"> <!-- Use container-fluid to span the entire width -->
                        <div class="main-menu main-menu-padding-1 main-menu-lh-2 d-none d-lg-block">
                            <% categoryNames.forEach(name => { %>
                                <div class="category-card">
                                    <div class="card card-1">
                                        <h5><%= name %></h5>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                </section>
                
                
                <div class="carausel-6-columns-cover position-relative">
                    <div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-arrows">
                    </div>
                    <div class="carausel-6-columns" id="carausel-6-columns">
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <img
                                        src="assets/imgs/category/category1.webp" alt="">
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">T-Shirt</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <img
                                        src="assets/imgs/category/category2.webp" alt="">
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Bags</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <img
                                        src="assets/imgs/category/category4.webp" alt="">
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Sandan</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <img
                                        src="assets/imgs/category/category3.webp" alt="">
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Scarf Cap</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                               <img
                                        src="assets/imgs/category/category5.webp" alt="">
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Shoes</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <img
                                        src="assets/imgs/category/category6.webp" alt="">
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Pillowcase</a></h5> -->

                        </div>
                    </div>
                </div>
        </section>

  

   
       
             
           <!-- Featured, Popular, Newly Added ---Product List -->


           <section class="product-tabs section-padding position-relative wow fadeIn animated">
            <div class="bg-square"></div>
            <div class="container">
                <div class="tab-header">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                   
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="nav-tab-three" data-bs-toggle="tab" data-bs-target="#tab-three"
                                type="button" role="tab" aria-controls="tab-three" aria-selected="false">New
                                added</button>
                        </li>
                    </ul>
                    <a href="#" class="view-more d-none d-md-flex">View More<i
                            class="fi-rs-angle-double-small-right"></i></a>
                </div>
                <!--End nav-tabs-->
                <div class="tab-content wow fadeIn animated" id="myTabContent">
                    <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
                        <div class="row product-grid-4">


                            <% for (let i=0; i < products.length; i++) { %>

                                <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                                    <div class="product-cart-wrap mb-30">
                                        <div class="product-img-action-wrap">
                                            <div class="product-img product-img-zoom">
                                                <a href="/productDetails?id=<%=products[i].id%>">
                                                    <img class="default-img"
                                                        src="/uploads/product-images/<%=products[i].productImage[0]%>" alt="">
                                                    
                                                </a>
                                            </div>
                                            <div class="product-action-1">
                                               
                                                <a aria-label="Add To Wishlist" class="action-btn hover-up" href="javascript:void(0);" onclick="addToWishlist('<%= products[i]._id %>')"><i class="fi-rs-heart"></i></a>
                                            </div>
                                        </div>
                                        <div class="product-content-wrap">
                                           
                                            <h2><a href="products-product-right.html"><%-products[i].productName%></a></h2>
                                            <!-- <div class="rating-result" title="90%">
                                                <span>
                                                    <span>90%</span>
                                                </span>
                                            </div> -->
                                            <div class="product-price">
                                                <span>₹<%-products[i].salePrice.toLocaleString('en-IN')%> </span>
                                                <span class="old-price">₹<%-products[i].regularPrice.toLocaleString('en-IN')%></span>
                                            </div>
                                            <div class="product-action-1 show">
                                                <a aria-label="Add To Cart" class="action-btn hover-up"
                                                href="/cart"><i
                                                        class="fi-rs-productsping-bag-add"></i></a>
                                                        
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% } %>


                        </div>
                    </div>
                </div>
            </div>
            <!--End product-grid-4-->
            </div>
            <!--En tab three (New added)-->
            </div>
            <!--End tab-content-->
            </div>
        </section>


        <%- include("../partial/footer") %>
        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var swiper = new Swiper('.swiper-container', {
                    loop: true,
                    autoplay: {
                        delay: 5000, // Time between slides in milliseconds
                        disableOnInteraction: false, // Allows manual navigation without disabling autoplay
                    },
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                    speed: 3000, // Slow down the transition speed to 3000ms (3 seconds)
                    effect: 'creative',
                    creativeEffect: {
                        prev: {
                            // Scale the previous slide to 80% and translate it by 50px
                            translate: [0, 0, -200],
                            scale: 0.8,
                        },
                        next: {
                            // Translate the next slide by 100%
                            translate: ['100%', 0, 0],
                        },
                    },
                });
            });
        </script>
        
        <script>
            function addToWishlist(productId) {
                $.ajax({
                    url: "/addToWishlist",
                    method: "post",
                    data: { productId: productId },
                    success: function (response) {
                        if (response.status === true) {
                            Swal.fire({
                                title: 'Added to Wishlist!',
                                text: 'Continue Shopping',
                                icon: 'success',
                                timer: 2000,
                                showConfirmButton: false
                            });
                        } else if (response.status === false) {
                            Swal.fire({
                                title: 'You need to Login first',
                                text: 'Continue Shopping',
                                icon: 'warning',
                                timer: 2000,
                                showConfirmButton: false
                            }).then(() => { window.location.href = '/login'; });
                        } else {
                            Swal.fire({
                                title: 'Error!',
                                text: 'Failed to add to wishlist',
                                icon: 'error',
                                timer: 2000,
                                showConfirmButton: false
                            });
                        }
                    },
                    error: function (err) {
                        console.error(err);
                        alert("Error occurred");
                    }
                });
                return false; // Prevent default form submission
            }
        </script>